(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-02a2c369"],{"14ce":function(e,t,a){},"1a86":function(e,t,a){"use strict";var i={methods:{onClickLeft:function(){window.history.go(-1)}}};t["a"]=i},"6e69":function(e,t,a){"use strict";var i=a("14ce"),n=a.n(i);n.a},e465:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("van-nav-bar",{staticClass:"shawdow",attrs:{title:"自定义个人信息","left-text":"","left-arrow":""},on:{"click-left":e.onClickLeft}}),a("div",{staticClass:"header1 m_margin"},[e._v("\n    自定义头像\n  ")]),a("van-uploader",{attrs:{"after-read":e.afterRead,"max-count":1,"max-size":1048576},on:{oversize:e.oversize},model:{value:e.fileList,callback:function(t){e.fileList=t},expression:"fileList"}}),a("div",{staticClass:"header1 m_margin"},[e._v("\n    自定义昵称\n  ")]),a("div",{staticClass:"form_con"},[a("van-field",{attrs:{clearable:"",size:"large",label:"昵称",placeholder:"请输入昵称"},model:{value:e.nickname,callback:function(t){e.nickname=t},expression:"nickname"}})],1),a("van-button",{staticClass:"btn common_btn",attrs:{type:"primary",block:!0,size:"normal"},on:{click:e.save}},[e._v("保存")])],1)},n=[],s=(a("8e6e"),a("ac6a"),a("456d"),a("bd86")),r=a("eeb9"),o=a("1a86"),c=a("2f62");function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(a,!0).forEach((function(t){Object(s["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var u={mixins:[o["a"]],name:"UserMsg",data:function(){return{fileList:[],nickname:"",fileStatus:!1}},methods:f({},Object(c["b"])(["updateUserName","updateAvator"]),{oversize:function(){this.$toast("图片大小不能超过1M")},afterRead:function(){this.fileStatus=!0},save:function(){var e=this;if(0!=this.fileList.length||""!=this.nickname){var t=new FormData;if(0==this.fileList.length)t.append("nickname",this.nickname);else if(""==this.nickname){if(!this.fileStatus)return void this.$toast("文件还没准备好");t.append("file",this.fileList[0].file)}else{if(!this.fileStatus)return void this.$toast("文件还没准备好");t.append("nickname",this.nickname),t.append("file",this.fileList[0].file)}console.log(this.fileList[0]),Object(r["a"])({method:"post",url:"/api/update_user",data:t,headers:{"Content-Type":"multipart/form-data"}}).then((function(t){200===t.data.code&&(e.fileList=[],e.nickname="",e.$toast("保存成功")),r["a"].get("/api/get_user").then((function(t){null!=t.data.data.username&&e.updateUserName(t.data.data.username),null!=t.data.data.avator&&e.updateAvator("/files/"+t.data.data.avator)}))}))}else this.$toast("头像和昵称不能同时为空")}})},d=u,p=(a("6e69"),a("2877")),m=Object(p["a"])(d,i,n,!1,null,"206d7f0a",null);t["default"]=m.exports}}]);